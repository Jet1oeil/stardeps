{
	"name": "zlib",
	"homepage": "https://zlib.net/",
	"scm": {
        "type": "git",
        "url": "https://github.com/madler/zlib.git"
    },
    "options": {
        "shared" : {
            "default-state":"disabled",
            "rules": [
                {
                    "state":"enabled",
                    "vars": {
                        "OPTIONS::SHARED":"--static",
                        "OPTIONS::MAKE_SHARED_MODE":"SHARED_MODE=1"
                    }
                },
                {
                    "state":"disabled",
                    "vars": {
                        "OPTIONS::SHARED":"--static",
                        "OPTIONS::MAKE_SHARED_MODE":""
                    }
                }
            ]
        }
    },
    "vars":{
        "CONFIGURE_OPTIONS":"${OPTIONS::STATIC} --prefix=${PACKAGE_PREFIX_PATH}",
        "MAKE_CROSS_OPTIONS":"-fwin32/Makefile.gcc ${OPTIONS::MAKE_SHARED_MODE} PREFIX=${CROSS_COMPIL_PREFIX}-",
        "MAKE_CROSS_INSTALL_OPTIONS":"-fwin32/Makefile.gcc ${OPTIONS::MAKE_SHARED_MODE} BINARY_PATH=${PACKAGE_PREFIX_PATH}/bin INCLUDE_PATH=${PACKAGE_PREFIX_PATH}/include LIBRARY_PATH=${PACKAGE_PREFIX_PATH}/lib"
    },
    "recipe": [
        {
            "step":"configure",
            "platforms":"linux-gcc-64,darwin-clang-64",
            "cmd":"${PACKAGE_SRC_PATH}/configure ${CONFIGURE_OPTIONS}"
        },
        {
            "step":"configure",
            "platforms":"linux-mingw-gcc-32,linux-mingw-gcc-64",
            "cmd":"${RSYNC} -a -v --delete-after ${PACKAGE_SRC_PATH}/ ${PACKAGE_BUILD_PATH}"
        },
        {
            "step":"build",
            "platforms":"linux-gcc-64,darwin-clang-64",
            "cmd":"${MAKE}"
        },
        {
            "step":"build",
            "platforms":"linux-mingw-gcc-32,linux-mingw-gcc-64",
            "cmd":"${MAKE} ${MAKE_CROSS_OPTIONS}"
        },
        {
            "step":"install",
            "platforms":"linux-gcc-64,darwin-clang-64",
            "actions":[
                {"cmd":"${MAKE} install"},
                {"cmd":"cp ${PACKAGE_PREFIX_PATH}/lib/pkgconfig/zlib.pc ${PKG_CONFIG_LIBDIR}/"}
            ]
        },
        {
            "step":"install",
            "platforms":"linux-mingw-gcc-32,linux-mingw-gcc-64",
            "actions":[
                {"cmd":"${MAKE} install ${MAKE_CROSS_INSTALL_OPTIONS}"},
                {"cmd":"cp ${PACKAGE_PREFIX_PATH}/lib/pkgconfig/zlib.pc ${PKG_CONFIG_LIBDIR}/"}
            ]
        },
        {
            "step":"clean",
            "cmd":"rm -f ${PKG_CONFIG_LIBDIR}/zlib.pc"
        }
    ]
}
